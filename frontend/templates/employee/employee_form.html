{% extends 'base.html' %}
{% block title %}{{ 'Add' if mode == 'add' else 'Edit' }} Employee{% endblock %}

{% block content %}
<h2>{{ '➕ Add' if mode == 'add' else '✏️ Edit' }} Employee</h2>

<form method="POST">
    <div class="mb-3">
        <label class="form-label">Full Name</label>
        <input type="text" name="fullname" class="form-control" value="{{ employee.fullname if employee else '' }}" required>
    </div>

    <div class="mb-3">
        <label class="form-label">Address</label>
        <input type="text" name="address" class="form-control" value="{{ employee.address if employee else '' }}" required>
    </div>

    <div class="mb-3">
        <label class="form-label">Position</label>
        <select name="position" class="form-select" required>
            <option value="">Select...</option>
            {% if session['position'] == 'Admin' %}
                {% for role in ['Admin', 'Manager', 'Receptionist'] %}
                    <option value="{{ role }}" {% if employee and employee.position == role %}selected{% endif %}>{{ role }}</option>
                {% endfor %}
            {% else %}
                {% for role in ['Receptionist'] %}
                    <option value="{{ role }}" {% if employee and employee.position == role %}selected{% endif %}>{{ role }}</option>
                {% endfor %}
            {% endif %}
        </select>
    </div>

    <div class="mb-3">
        <label class="form-label">SSN</label>
        <input type="text" name="ssn" class="form-control" pattern="\d{3}-\d{2}-\d{4}" title="Format: XXX-XX-XXXX" value="{{ employee.ssn if employee else '' }}" required>
    </div>

    {% if session['position'] == 'Admin' %}
        <div class="mb-3">
            <label class="form-label">Hotel ID</label>
            <input type="number" name="hotel_id" class="form-control" min="1" value="{{ employee.hotelid if employee else '' }}" required>
        </div>
    {% else %}
        <input type="hidden" name="hotel_id" value="{{ session['hotel_id'] }}">
    {% endif %}

    <button type="submit" class="btn btn-primary">{{ 'Add' if mode == 'add' else 'Update' }} Employee</button>
    <a href="{{ url_for('employee.manage_employees') }}" class="btn btn-secondary">Cancel</a>
</form>
{% endblock %}
